{% extends "../layouts/adminLayout.html" %} {% block content %}
<main class="container">
  <article>
    <header>
      <h1>Edit Blog Post</h1>
    </header>

    <nav>
      <a href="/admin" role="button" class="secondary">Back to Overview</a>
    </nav>

    <form method="POST" action="/admin/edit/{{ post.id }}">
      <div class="grid">
        <label for="title">
          Title
          <input
            type="text"
            id="title"
            name="title"
            value="{{ post.title }}"
            required
          />
        </label>

        <label for="author">
          Author
          <input
            type="text"
            id="author"
            name="author"
            value="{{ post.author }}"
            required
          />
        </label>
      </div>

      <label for="image">
        Image URL
        <input
          type="text"
          id="image"
          name="image"
          value="/images/{{ post.image }}"
          required
        />
      </label>

      <label for="teaser">
        Teaser
        <textarea id="teaser" name="teaser" required>
{{ post.teaser }}</textarea
        >
      </label>

      <label for="editor">
        Content
        <div id="editor">{{ post.content | safe }}</div>
        <input type="hidden" name="content" id="hiddenContent" />
      </label>

      <div class="grid">
        <button type="submit" href="/admin">Save Changes</button>
        <a href="/admin" role="button" class="contrast">Cancel</a>
      </div>
    </form>
  </article>
</main>

<!-- Quill Editor Dependencies -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

<script>
  // Initialize Quill editor
  const quill = new Quill("#editor", {
    theme: "snow",
    modules: {
      toolbar: [
        ["bold", "italic", "underline", "strike"],
        ["blockquote", "code-block"],
        [{ header: 1 }, { header: 2 }],
        [{ list: "ordered" }, { list: "bullet" }],
        [{ script: "sub" }, { script: "super" }],
        ["link", "image"],
        ["clean"],
      ],
    },
  });

  // Handle form submission
  const form = document.getElementById("postForm");
  form.onsubmit = function () {
    const hiddenContent = document.getElementById("hiddenContent");
    hiddenContent.value = quill.root.innerHTML;
    return true;
  };
</script>
{% endblock %}
