{% extends "../layouts/adminLayout.njk" %} {% block content %}
<main class="container">
  <article>
    <header>
      <h1>New Blogpost</h1>
    </header>

    <nav>
      <a href="/admin" role="button" class="secondary">Back to Overview</a>
    </nav>

    <form method="POST" action="/admin/create">
      <div class="grid">
        <label for="title">
          Title
          <input type="text" id="title" name="title" required />
        </label>

        <label for="author">
          Author
          <input type="text" id="author" name="author" required />
        </label>
      </div>

      <label for="image">
        Image URL
        <input type="text" id="image" name="image" value="/images/" required />
      </label>

      <label for="teaser">
        Teaser
        <textarea id="teaser" name="teaser" required></textarea>
      </label>

      <label for="editor">
        Content
        <div id="editor"></div>
        <input type="hidden" name="content" id="hiddenContent" />
      </label>

      <div class="grid">
        <button type="submit">Create Post</button>
        <a href="/admin" role="button" class="contrast">Cancel</a>
      </div>
    </form>
  </article>
</main>

<!-- Quill Editor Dependencies -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

<script>
  // Initialize Quill editor
  const quill = new Quill("#editor", {
    theme: "snow",
    modules: {
      toolbar: [
        ["bold", "italic", "underline", "strike"],
        ["blockquote", "code-block"],
        [{ header: 1 }, { header: 2 }],
        [{ list: "ordered" }, { list: "bullet" }],
        [{ script: "sub" }, { script: "super" }],
        ["link", "image"],
        ["clean"],
      ],
    },
  });

  // Handle form submission
  const form = document.querySelector("form");
  form.addEventListener("submit", function (e) {
    e.preventDefault();
    const hiddenContent = document.getElementById("hiddenContent");
    hiddenContent.value = quill.root.innerHTML;
    this.submit();
  });
</script>
{% endblock %}
